<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guess the Famous Person</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-blue: #3498db;
            --dark-blue: #2980b9;
            --light-blue: #ecf0f1;
            --accent-green: #2ecc71;
            --text-dark: #2c3e50;
            --text-light: #ffffff;
            --background-light: #f4f7f6;
            --card-background: #ffffff;
            --border-color: #bdc3c7;
            --shadow-light: 0 8px 25px rgba(0, 0, 0, 0.15);
            --shadow-dark: 0 12px 35px rgba(0, 0, 0, 0.25);
        }

        body {
            font-family: 'Inter', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--light-blue), var(--background-light));
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            color: var(--text-dark);
            overflow: hidden; /* Prevent scrollbar from background gradient */
        }

        .game-container {
            background-color: var(--card-background);
            border-radius: 25px;
            box-shadow: var(--shadow-light);
            padding: 40px;
            width: 100%;
            max-width: 550px;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 25px;
            transition: all 0.3s ease-in-out;
        }

        .game-container:hover {
            box-shadow: var(--shadow-dark);
        }

        h1 {
            color: var(--primary-blue);
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
            letter-spacing: -0.02em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
        }

        .clue-box {
            background: linear-gradient(145deg, #e0f2f7, #c6e9f0); /* Softer gradient */
            border: 2px solid var(--primary-blue);
            border-radius: 18px;
            padding: 25px;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start; /* Align clues to the left */
            font-size: 1.15em;
            color: var(--text-dark);
            font-weight: 500;
            text-align: left;
            overflow-y: auto;
            max-height: 280px;
            gap: 12px;
            box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .clue-box:hover {
            transform: translateY(-2px);
            box-shadow: inset 0 5px 10px rgba(0, 0, 0, 0.12);
        }

        .clue-item {
            padding: 5px 0;
            border-bottom: 1px dashed rgba(var(--primary-blue), 0.4);
            width: 100%;
            text-align: left;
            opacity: 0; /* Initially hidden for animation */
            animation: fadeInClue 0.5s forwards;
        }

        .clue-item:last-child {
            border-bottom: none;
        }

        @keyframes fadeInClue {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        input[type="text"] {
            padding: 18px 20px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 1.1em;
            width: calc(100% - 40px); /* Account for padding */
            box-sizing: border-box;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            outline: none;
            color: var(--text-dark);
            background-color: var(--background-light);
        }

        input[type="text"]:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.4);
            background-color: var(--card-background);
        }

        .button-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        button {
            background: linear-gradient(145deg, var(--primary-blue), var(--dark-blue));
            color: var(--text-light);
            padding: 16px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.15em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            letter-spacing: 0.02em;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 25px rgba(0, 0, 0, 0.35);
        }

        button:active {
            transform: translateY(0);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        button#newGame {
            background: linear-gradient(145deg, var(--accent-green), #27ae60);
        }

        button#shareButton {
            background: linear-gradient(145deg, #f39c12, #e67e22); /* Orange/Yellow gradient */
            display: none; /* Hidden by default */
        }


        .message-box {
            min-height: 40px;
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-dark);
            transition: color 0.3s ease, transform 0.3s ease;
        }

        .loading-spinner {
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid var(--primary-blue); /* Blue */
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
            display: none; /* Hidden by default */
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .game-container {
                padding: 25px;
                gap: 20px;
                border-radius: 18px;
            }

            h1 {
                font-size: 2em;
            }

            input[type="text"], button {
                font-size: 1em;
                padding: 14px;
                border-radius: 10px;
            }

            .clue-box, .message-box {
                font-size: 0.95em;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Guess the Famous Person</h1>
        <div class="clue-box" id="clues">
            <!-- Clues will appear here -->
        </div>
        <div class="loading-spinner" id="loadingSpinner"></div>
        <input type="text" id="guessInput" placeholder="Enter your guess...">
        <button id="submitGuess">Submit Guess</button>
        <div class="message-box" id="message"></div>
        <div class="button-group">
            <button id="shareButton">Share Result</button>
            <button id="newGame" style="background: linear-gradient(145deg, #4CAF50, #2E8B57);">New Game</button>
        </div>
    </div>

    <script>
        const guessInput = document.getElementById('guessInput');
        const submitGuessBtn = document.getElementById('submitGuess');
        const newGameBtn = document.getElementById('newGame');
        const shareButton = document.getElementById('shareButton'); // New share button
        const cluesDiv = document.getElementById('clues');
        const messageDiv = document.getElementById('message');
        const loadingSpinner = document.getElementById('loadingSpinner');

        // Global variables for game state
        let famousPeopleData = [
            {
                name: "Taylor Swift",
                clues: [
                    "This person is known for their songwriting.",
                    "They broke several streaming records in the 2020s.",
                    "Their fans are often called 'Swifties'.",
                    "They famously re-recorded several of their early albums.",
                    "Their most recent album is 'The Tortured Poets Department'."
                ]
            },
            {
                name: "Beyonc√©",
                clues: [
                    "This artist is a global music icon.",
                    "They were part of a very famous girl group before their solo career.",
                    "Known for powerful vocals and intricate stage performances.",
                    "Released a visual album that broke the internet.",
                    "Often referred to as 'Queen Bey'."
                ]
            },
            {
                name: "Elon Musk",
                clues: [
                    "This individual is a a prominent figure in the tech industry.",
                    "They are involved with electric vehicles and space exploration.",
                    "Known for controversial social media presence.",
                    "Founder of SpaceX and Tesla.",
                    "Owns a popular social media platform formerly known as Twitter."
                ]
            },
            {
                name: "Mark Zuckerberg",
                clues: [
                    "This person revolutionized social networking.",
                    "They dropped out of Harvard University.",
                    "Their company owns Instagram and WhatsApp.",
                    "Known for wearing grey t-shirts.",
                    "Co-founded Facebook."
                ]
            },
            {
                name: "LeBron James",
                clues: [
                    "This athlete is a living basketball legend.",
                    "Often compared to Michael Jordan.",
                    "Has played for the Cavaliers, Heat, and Lakers.",
                    "Known as 'King James'.",
                    "Holds the NBA all-time scoring record."
                ]
            },
             {
                name: "Rihanna",
                clues: [
                    "This artist is a successful musician and entrepreneur.",
                    "They come from Barbados.",
                    "Known for hits like 'Umbrella' and 'Diamonds'.",
                    "Founder of Fenty Beauty.",
                    "Performed at the Super Bowl LVII halftime show."
                ]
            },
            {
                name: "Dwayne Johnson",
                clues: [
                    "This person is a globally recognized actor and former athlete.",
                    "Known for their muscular physique and charisma.",
                    "Started their career in professional wrestling.",
                    "Often referred to as 'The Rock'.",
                    "Starred in the 'Jumanji' and 'Fast & Furious' franchises."
                ]
            },
            {
                name: "Kim Kardashian",
                clues: [
                    "This individual rose to fame through a reality television show.",
                    "They are part of a well-known celebrity family.",
                    "Known for their business ventures in fashion and beauty.",
                    "Has a strong social media presence.",
                    "Studied to become a lawyer."
                ]
            },
            {
                name: "Billie Eilish",
                clues: [
                    "This young artist gained widespread fame in the late 2010s.",
                    "Known for their distinct vocal style and unique fashion.",
                    "Often collaborates with their brother on music.",
                    "Won multiple Grammy Awards for her debut album.",
                    "Sang the theme song for a James Bond film, 'No Time to Die'."
                ]
            },
            {
                name: "Harry Styles",
                clues: [
                    "This artist was a member of a popular boy band.",
                    "Known for their flamboyant fashion sense and solo music career.",
                    "Starred in films like 'Dunkirk' and 'Don't Worry Darling'.",
                    "Had a massive hit with the song 'Watermelon Sugar'.",
                    "Often performs in brightly colored, glittery outfits."
                ]
            }
        ];
        let currentPerson = {};
        let currentClueIndex = 0;
        let maxClues = 5;
        let guessCount = 0; // New variable to track guesses

        // Function to display messages to the user
        function displayMessage(msg, color = 'initial') {
            messageDiv.textContent = msg;
            messageDiv.style.color = color;
            messageDiv.style.transform = 'scale(1.05)';
            setTimeout(() => {
                messageDiv.style.transform = 'scale(1)';
            }, 200);
        }

        // Function to update the displayed clues
        function updateClues() {
            cluesDiv.innerHTML = ''; // Clear previous clues
            if (currentPerson.clues && currentPerson.clues.length > 0) {
                for (let i = 0; i <= currentClueIndex && i < currentPerson.clues.length; i++) {
                    const clueItem = document.createElement('div');
                    clueItem.classList.add('clue-item');
                    clueItem.textContent = `Clue ${i + 1}: ${currentPerson.clues[i]}`;
                    cluesDiv.appendChild(clueItem);
                }
            } else {
                cluesDiv.textContent = 'No clues available. Select New Game.';
            }
        }

        // Function to start a new game
        async function startNewGame() {
            // Reset game state
            currentClueIndex = 0;
            guessCount = 0; // Reset guess count for new game
            guessInput.value = '';
            guessInput.disabled = false;
            submitGuessBtn.disabled = false;
            shareButton.style.display = 'none'; // Hide share button
            displayMessage('Guess the famous person!', 'var(--text-dark)');
            cluesDiv.innerHTML = ''; // Clear clues immediately

            // Pick a random famous person from the predefined data
            const randomIndex = Math.floor(Math.random() * famousPeopleData.length);
            currentPerson = famousPeopleData[randomIndex]; // Assign the whole object

            // Display the first clue
            if (currentPerson.clues.length > 0) {
                updateClues();
            } else {
                displayMessage('Error: No clues found for this person. Try New Game.', 'red');
                guessInput.disabled = true;
                submitGuessBtn.disabled = true;
            }
        }

        // Function to generate the share message
        function generateShareMessage(won) {
            let message = `I tried to guess a famous person!`;
            if (won) {
                message += ` I guessed "${currentPerson.name}" in ${guessCount} tries!`;
            } else {
                message += ` I couldn't guess "${currentPerson.name}". It took me ${guessCount} tries.`;
            }
            message += ` #GuessThePersonGame`; // Hashtag for social media
            // Add a link to the game if hosted (replace with your actual GitHub Pages URL)
            // For now, we'll assume it's just the text.
            // message += `\nPlay it here: [YOUR_GITHUB_PAGES_URL]`;
            return message;
        }

        // Event listener for submitting a guess
        submitGuessBtn.addEventListener('click', async () => {
            const guess = guessInput.value.trim();
            if (!guess) {
                displayMessage('Please enter a guess!', 'orange');
                return;
            }

            // Increment guess count on each attempt
            guessCount++;

            // Clean and normalize both the guess and the correct answer for flexible comparison.
            const cleanGuess = guess.toLowerCase()
                                  .replace(/^(mr\.|ms\.|mrs\.|dr\.)\s+/i, '')
                                  .replace(/\s+(jr\.|sr\.|iii|ii)$/i, '')
                                  .replace(/[^a-z0-9\s]/g, '')
                                  .trim();

            const cleanAnswer = currentPerson.name.toLowerCase()
                                   .replace(/^(mr\.|ms\.|mrs\.|dr\.)\s+/i, '')
                                   .replace(/\s+(jr\.|sr\.|iii|ii)$/i, '')
                                   .replace(/[^a-z0-9\s]/g, '')
                                   .trim();

            let isCorrect = false;

            // Condition 1: Exact match of the cleaned strings
            if (cleanGuess === cleanAnswer) {
                isCorrect = true;
            } else {
                // Condition 2: Check if the cleaned answer contains the cleaned guess as a substring.
                if (cleanGuess.length > 0 && cleanAnswer.includes(cleanGuess)) {
                    isCorrect = true;
                } else {
                    // Condition 3: Check for word-level matching, allowing for different word orders.
                    const guessWords = cleanGuess.split(/\s+/).filter(word => word.length > 0);
                    const answerWords = cleanAnswer.split(/\s+/).filter(word => word.length > 0);

                    if (guessWords.length > 0 && guessWords.every(word => answerWords.includes(word))) {
                        isCorrect = true;
                    }
                }
            }

            if (isCorrect) {
                displayMessage(`Congratulations! You guessed "${currentPerson.name}" correctly!`, 'var(--accent-green)');
                guessInput.disabled = true;
                submitGuessBtn.disabled = true;
                shareButton.style.display = 'block'; // Show share button on win
            } else {
                currentClueIndex++;
                if (currentClueIndex < maxClues && currentClueIndex < currentPerson.clues.length) {
                    displayMessage(`Incorrect! Revealing Clue ${currentClueIndex + 1}.`, 'red');
                    updateClues();
                } else {
                    displayMessage(`Game over! The person was "${currentPerson.name}". Better luck next time!`, 'red');
                    guessInput.disabled = true;
                    submitGuessBtn.disabled = true;
                    shareButton.style.display = 'block'; // Show share button on loss
                }
            }
            guessInput.value = ''; // Clear input after guess
        });

        // Event listener for Share button
        shareButton.addEventListener('click', () => {
            let shareText;
            // Check if the user won (guessInput is disabled and message is green)
            if (guessInput.disabled && messageDiv.style.color === 'var(--accent-green)') {
                shareText = generateShareMessage(true);
            } else {
                shareText = generateShareMessage(false);
            }

            // Copy to clipboard
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = shareText;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            displayMessage('Result copied to clipboard!', 'var(--primary-blue)');
        });


        // Allow pressing Enter to submit guess
        guessInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault(); // Prevent default form submission
                submitGuessBtn.click();
            }
        });

        // Event listener for starting a new game
        newGameBtn.addEventListener('click', startNewGame);

        // Initialize the game when the page loads
        window.onload = startNewGame;
    </script>
</body>
</html>
